pipeline {
	agent any
		
	stages{
		stage('Build'){
            		steps {
                		sh 'mvn clean package'
            		}
            		post {
                		success {
                    			echo 'Now Archiving...'
                    			archiveArtifacts artifacts: 'target/*.war'
                		}
            		}
		}
		stage('deploy'){
			steps{
			withCredentials([usernamePassword(credentialsId: 'admin', passwordVariable: 'admin', usernameVariable: 'admin')]) {
				sh "scp -o StrictHostKeyChecking=no target/*.war ec2-user@18.188.252.112:/root/apache-tomcat-7.0.53/webapps"

				echo 'deployed..haha'
			}
			}
		}
	}
}
